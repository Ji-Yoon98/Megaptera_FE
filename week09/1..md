# 1. ê°œë°œí•˜ê¸° ì „ ì¤€ë¹„

{% hint style="info" %}
ì˜¨ë¼ì¸ ì‡¼í•‘ëª° ê¸°ë³¸ ê¸°ëŠ¥ ê°œë°œ
{% endhint %}

## ğŸ“ìš©ì–´

- Product: ìƒí’ˆ
  - Summary: ìƒí’ˆì— ëŒ€í•œ ìš”ì•½ ì •ë³´
  - Detail: ìƒí’ˆì— ëŒ€í•œ ìƒì„¸ ì •ë³´
  - Image: ìƒí’ˆ ì´ë¯¸ì§€
  - Option: ìƒí’ˆì— ëŒ€í•œ ìƒì„¸ ì˜µì…˜ ì¢…ë¥˜ (ìƒ‰ìƒ, í¬ê¸° ë“±)
    - OptionItem: ì˜µì…˜ì— ëŒ€í•œ ìƒì„¸ ì˜µì…˜ ê°’ (ì˜µì…˜ì´ ìƒ‰ìƒì´ë¼ë©´ ì´ê±´ Blue, Red ê°™ì€ ê±¸ ì˜ë¯¸í•¨)
- Category: ìƒí’ˆì— ëŒ€í•œ ë¶„ë¥˜
- Cart: ì¥ë°”êµ¬ë‹ˆ
  - LineItem: ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ê²ƒ (ìƒí’ˆ, ì˜µì…˜, ìˆ˜ëŸ‰ ë“±ì„ ë™ì‹œì— ë‹¤ë£¸)
    - ì—¬ê¸°ì„œë„ Optionê³¼ OptionItemì„ ì‚¬ìš©í•œë‹¤.
    - ìš©ì–´ëŠ” ë™ì¼í•˜ì§€ë§Œ Productì™€ ë‹¤ë¥¸ êµ¬ì„±ì„ ê°–ê¸° ë•Œë¬¸ì—, ì—¬ê¸°ì„œëŠ” Productì™€ Orderë¼ëŠ” ì ‘ë‘ì–´ë¥¼ í™œìš©í•œë‹¤.
    - ì‹œìŠ¤í…œì„ ë¶„ë¦¬í•  ìˆ˜ ìˆë‹¤ë©´, ê·¼ë³¸ì ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê±¸ ì¶”ì²œ(ìƒí’ˆ ì •ë³´ í™•ì¸ / ì¥ë°”êµ¬ë‹ˆ / ì£¼ë¬¸).
- Order: ì£¼ë¬¸
  - ì—¬ê¸°ì„œë„ ë™ì¼í•œ LineItem í™œìš©.
- User: ì‚¬ìš©ì

## ğŸ“ê¸°ëŠ¥

 1. ìƒí’ˆ ëª©ë¡ í™•ì¸
 2. ìƒí’ˆ ìƒì„¸ ì •ë³´ í™•ì¸
 3. ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆ ë‹´ê¸°
 4. ì£¼ë¬¸í•˜ê¸° â†’ ë°°ì†¡ì§€ ì…ë ¥, ê²°ì œ
 5. ì£¼ë¬¸ ëª©ë¡ í™•ì¸
 6. ì£¼ë¬¸ ìƒì„¸ í™•ì¸
 7. ë¡œê·¸ì¸
 8. íšŒì› ê°€ì…

## ğŸ“í™”ë©´

 1. í™ˆ í˜ì´ì§€ - `/`
 2. ìƒí’ˆ ëª©ë¡ í˜ì´ì§€ - `/products`
 3. ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ - `/products/{id}`
 4. ì¥ë°”êµ¬ë‹ˆ í˜ì´ì§€ - `/cart`
 5. ì£¼ë¬¸ í˜ì´ì§€ - `/order`
 6. ì£¼ë¬¸ ì™„ë£Œ í˜ì´ì§€ - `/order/complete`
 7. ì£¼ë¬¸ ëª©ë¡ í˜ì´ì§€ - `/orders`
 8. ì£¼ë¬¸ ìƒì„¸ í˜ì´ì§€ - `/orders/{id}`
 9. ë¡œê·¸ì¸ í˜ì´ì§€ - `/login`
 10. íšŒì› ê°€ì… í˜ì´ì§€ - `/signup`
 11. íšŒì› ê°€ì… ì™„ë£Œ í˜ì´ì§€ - `/signup/complete`

## ğŸ“REST API

- [REST API](https://docs.google.com/document/d/1bGYl3IDoX53cNBbZHNlsRhPLZQ3Qiu-Jm3gpqyu_xI0/view)

## ğŸ“ê°œë°œ í™˜ê²½ ì„¸íŒ…

- [ê¸°ë³¸ ì„¸íŒ…](https://github.com/ahastudio/til/blob/main/react/20230205-setup-react-project.md)
- [CodeceptJS ì„¸íŒ…](https://github.com/ahastudio/CodingLife/tree/main/20211012/react#codeceptjs-ì‚¬ìš©)

## ğŸ“ì¶”ê°€ë¡œ ì„¤ì¹˜í•  ë¼ì´ë¸ŒëŸ¬ë¦¬

1. [React Router](https://github.com/remix-run/react-router)
2. [styled-components](https://github.com/styled-components/styled-components)
3. [styled-reset](https://github.com/zacanger/styled-reset)
4. [usehooks-ts](https://github.com/juliencrn/usehooks-ts)
5. [Axios](https://github.com/axios/axios): REST API ì‚¬ìš©ì„ ìœ„í•œ HTTP í´ë¼ì´ì–¸íŠ¸.
6. [tsyringe](https://github.com/microsoft/tsyringe)
7. [reflect-metadata](https://github.com/rbuckton/reflect-metadata)
8. [usestore-ts](https://github.com/seed2whale/usestore-ts)
9. [jest-dom](https://github.com/testing-library/jest-dom): React Testing Libraryì—ì„œ í™œìš©í•  ìˆ˜ ìˆëŠ” DOM í™•ì¸ìš© Matcher ëª¨ìŒ.
10. [MSW](https://github.com/mswjs/msw)

```bash
npm i react-router-dom

npm i styled-components
npm i -D @types/styled-components @swc/plugin-styled-components

npm i styled-reset

npm i usehooks-ts

npm install axios

npm install --save tsyringe

npm install reflect-metadata

npm install usestore-ts

npm i -D jest @types/jest @swc/core @swc/jest
jest-environment-jsdom
@testing-library/react @testing-library/jest-dom

npm i -D msw
```

## ğŸ“E2E Test

CodeceptJSë¡œ E2E í…ŒìŠ¤íŠ¸ ì¤€ë¹„í•˜ê³ , ì—¬ê¸° ìˆëŠ” ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸ë¥¼ ëª¨ë‘ í†µê³¼ì‹œí‚¤ëŠ” ê±¸ ëª©í‘œë¡œ ì‚¼ëŠ”ë‹¤.

1. ìƒí’ˆ ëª©ë¡
    1. ëª¨ë“  ìƒí’ˆ ë³´ê¸°
    2. íŠ¹ì • ì¹´í…Œê³ ë¦¬ì˜ ìƒí’ˆ ë³´ê¸°
2. ìƒí’ˆ ìƒì„¸
3. ì¥ë°”êµ¬ë‹ˆ
    1. ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆëŠ” ê²½ìš°
    2. ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì„ ë‹´ì€ ê²½ìš°
4. â€¦

## ğŸ“Styles

styles-componentsë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ defaultThemeê³¼ GlobalStylesë¥¼ ì¤€ë¹„.\
ê¸°ë³¸ ì½”ë“œëŠ” ê¸°ì¡´ê³¼ í¬ê²Œ ë‹¤ë¥´ì§€ ì•ŠìŒ.

## ğŸ“Routes

React Routerë¡œ ì—¬ëŸ¬ í˜ì´ì§€ë¥¼ í‘œí˜„í•˜ê¸° ìœ„í•´ routesì™€ Layoutì„ ì¤€ë¹„.\
ê¸°ë³¸ ì½”ë“œëŠ” ê¸°ì¡´ê³¼ í¬ê²Œ ë‹¤ë¥´ì§€ ì•ŠìŒ.

## ğŸ“Test Helper

í…ŒìŠ¤íŠ¸ ì½”ë“œì—ì„œ styled-componentsì˜\
Themeê³¼ React Routerì˜ Link ë“±ì„ ì‚¬ìš©í•  ë•Œ ë¬¸ì œê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡,\
React Testing Libraryì˜ renderë¥¼ í•œë²ˆ ê°ì‹¼ í…ŒìŠ¤íŠ¸ìš© í—¬í¼ í•¨ìˆ˜ë¥¼ ì¤€ë¹„.

```typescript
import { render as originalRender } from '@testing-library/react';

import React from 'react';

import { MemoryRouter } from 'react-router-dom';

import { ThemeProvider } from 'styled-components';

import defaultTheme from './styles/defaultTheme';

export function render(element: React.ReactElement) {
  return originalRender((
    <MemoryRouter initialEntries={['/']}>
      <ThemeProvider theme={defaultTheme}>
        {element}
      </ThemeProvider>
    </MemoryRouter>
  ));
}
```

## ğŸ“Types

ê¸°ë³¸ì ì¸ íƒ€ì…ì„ ì¤€ë¹„.\
íŠ¹ë³„í•œ ê²½ìš°ê°€ ì•„ë‹ˆë¼ë©´ ë¯¸ë¦¬ ì •í•œ ìš©ì–´ì§‘ê³¼ REST API ìŠ¤í™ì— ë§ì¶”ê²Œ ëœë‹¤.

```typescript
export type Category = {
  id: string;
  name: string;
}

export type Image = {
  url: string;
}

export type ProductSummary = {
  id: string;
  category: Category;
  thumbnail: Image;
  name: string;
  price: number;
}

export type ProductOptionItem = {
  id: string;
  name: string;
};

export type ProductOption = {
  id: string;
  name: string;
  items: ProductOptionItem[];
};

export type ProductDetail = {
  id: string;
  category: Category;
  images: Image[];
  name: string;
  price: number;
  options: ProductOption[];
  description: string;
}

export type OrderOptionItem = {
  name: string;
};

export type OrderOption = {
  name: string;
  item: OrderOptionItem;
};

export type LineItem = {
  id: string;
  product: {
    id: string;
    name: string;
  };
  options: OrderOption[];
  unitPrice: number;
  quantity: number;
  totalPrice: number;
}

export type Cart = {
  lineItems: LineItem[];
  totalPrice: number;
}
```

## ğŸ“MSW ì„¸íŒ…

REST API ìŠ¤í™ì— ë§ì¶°ì„œ MSW í•¸ë“¤ëŸ¬ë¥¼ ì¤€ë¹„.

```typescript
import { rest } from 'msw';

import { ProductSummary } from '../types';

import fixtures from '../../fixtures';

const BASE_URL = 'https://shop-demo-api-01.fly.dev';

const productSummaries: ProductSummary[] = fixtures.products
  .map((product) => ({
    id: product.id,
    category: product.category,
    thumbnail: { url: product.images[0].url },
    name: product.name,
    price: product.price,
  }));

const handlers = [
  rest.get(`${BASE_URL}/categories`, (req, res, ctx) => (
    res(ctx.json({ categories: fixtures.categories }))
  )),
  rest.get(`${BASE_URL}/products`, (req, res, ctx) => (
    res(ctx.json({ products: productSummaries }))
  )),
  rest.get(`${BASE_URL}/products/:id`, (req, res, ctx) => {
    const product = fixtures.products.find((i) => i.id === req.params.id);
    if (!product) {
      return res(ctx.status(404));
    }
    return res(ctx.json(product));
  }),
  rest.get(`${BASE_URL}/cart`, (req, res, ctx) => (
    res(ctx.json(fixtures.cart))
  )),
  rest.post(`${BASE_URL}/cart/line-items`, (req, res, ctx) => (
    res(ctx.status(201))
  )),
];

export default handlers;
```
