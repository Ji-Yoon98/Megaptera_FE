# 1. ë¡œê·¸ì¸

{% hint style="info" %}
í”„ë¡ íŠ¸ì—”ë“œ ì…ì¥ì—ì„œ ë¡œê·¸ì¸ì€ ì‚¬ìš©ìì˜ username(ì—¬ê¸°ì„œëŠ” email)ê³¼ passwordë¥¼ ë°±ì—”ë“œë¡œ ì „ì†¡í•´ì„œ Access Token(ì—¬ê¸°ì„  JWTë¥¼ ì‚¬ìš©)ë¥¼ ì–»ëŠ” ê³¼ì •ì´ë‹¤.

ì´ë ‡ê²Œ ì–»ì€ Access Tokenì„ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì€ ì—¬ëŸ¬ ê°€ì§€ê°€ ìˆì§€ë§Œ, ì—¬ê¸°ì„œëŠ” usehooks-tsì˜ useLocalStorageë¥¼ ì‚¬ìš©í•˜ì—¬ ì „ì—­ì ìœ¼ë¡œ ë™ê¸°í™” í•œë‹¤.
{% endhint %}

ë¡œê·¸ì¸ ì§„í–‰ ìˆœì„œ

1. `LoginPage`ë¥¼ ë§Œë“¤ì–´ `LoginForm`ê³¼ `LoginFormStore`ë¥¼ ì‚¬ìš© Access Tokenì´ ë°”ë€Œì—ˆì„ ë•Œ í™ˆ(/)ìœ¼ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜
2. `routes` login ì¶”ê°€
3. `LoginForm` ì»´í¬ë„ŒíŠ¸ ìƒì„±
4. TextBox ìƒì„±
5. ê¸°ë³¸ Props ê°’ì„ ì§€ì›í•˜ëŠ” ESLint ë£° ì¶”ê°€ ğŸ‘‡ğŸ»

```javascript
'react/require-default-props': [2, { functions: 'defaultArguments' }],
```

6. `Button` type ì¶”ê°€ + disabled style ì¶”ê°€
7. `LoginFormStore` ìƒì„±
8. `useLoginFormStore` í›…
9. `ApiService` ë¡œê·¸ì¸ API í˜¸ì¶œ ë©”ì„œë“œë¥¼ ì¶”ê°€ ğŸ‘‡ğŸ»

```typescript
async login({ email, password }: {
  email: string;
  password: string;
}): Promise<string> {
  const { data } = await this.instance.post('/session', { email, password });
  const { accessToken } = data;
  return accessToken;
}
```

10. ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ GNB êµ¬ì„±ì´ ë°”ë€Œë„ë¡ Headerë¥¼ ìˆ˜ì • ğŸ‘‡ğŸ»

```typescript
{accessToken ? (
          <>
            <li>
              <Link to="/cart">Cart</Link>
            </li>
            <li>
              <Button onClick={handleClickLogout}>
                Logout
              </Button>
            </li>
          </>
        ) : (
          <li>
            <Link to="/login">Login</Link>
          </li>
        )}
```

11. AddToCartForm ì»´í¬ë„ŒíŠ¸ë„ ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ë³´ì—¬ì¤Œ

> í›…ì„ mockingí•´ì„œ í…ŒìŠ¤íŠ¸ í•  ìˆ˜ ìˆìŒ.
>
> ```typescript
> let accessToken = '';
>
> jest.mock('../hooks/useAccessToken', () => () => ({
>  get accessToken() {
>    return accessToken;
>  },
> }));
> ```

## ğŸ“ì •ë¦¬í•˜ê¸° & ë…¸íŠ¸

ì˜ˆì „ ê¸°ì–µì„ ë˜ì‚´ë ¤ë³´ì. ë°±ì—”ë“œë¡œ ë°ì´í„°ë¥¼ ê°€ì§€ê³  ì™”ì„ ë•Œ, MyBatisì™€ Dtoë¥¼ ì´ìš©í•˜ì—¬ Databaseë¥¼ selectí•´ì„œ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ id + pwê°€ ë§ë‹¤ë©´ ë¡œê·¸ì¸ì´ ë˜ë„ë¡ í•˜ëŠ” ê¸°ëŠ¥ì„ ë§Œë“¤ì—ˆì—ˆëŠ”ë°.

Access Tokenì„ ì¨ë³¸ ê²ƒì€ ì´ë²ˆì´ ì²˜ìŒì´ë‹¤.

> Access Tokenì´ë€?
>
> * access Tokenì€ ë³´í˜¸ëœ ì •ë³´ë“¤ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œë¶€ì—¬ì— ì‚¬ìš©ë¨.
> * access tokenì€ ë¡œê·¸ì¸ ì •ë³´ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì¹´ë“œí‚¤.

ìš”ì²­ë§ˆë‹¤ ì •ë³´ë¥¼ ë‹¤ì‹œ ë°›ì„ ìˆœ ì—†ê¸° ë•Œë¬¸ì— ì‚¬ìš©í•œë‹¤ê³  ë´„.

í…ŒìŠ¤íŠ¸ì—ì„œ ReferenceError: Request is not defined ì˜¤ë¥˜ ì‹œ\
â†’ `setupTest.ts`íŒŒì¼ì— `import 'whatwg-fetch'` ì¶”ê°€

\


`routes.test` ì—ì„œ ê³µí†µì ìœ¼ë¡œ fireEvent.click ì•„ë˜ await waitForí…ŒìŠ¤íŠ¸ê°€ í†µê³¼í•˜ì§€ ëª»í•˜ëŠ” ìƒí™©ì´ ë°œìƒí•¨..

```ts
await waitFor(() => {
  screen.getByText(/Orders/);
  screen.getByText(/Cart/);
  screen.getByText(/Logout/);
 });
```

ì—¬ê¸° ë¿ë§Œ ì•„ë‹Œ íšŒì› ê°€ì… ì™„ë£Œ ë° ordersì˜ ê²°ì œ ê¸ˆì•¡ ë¶€ë¶„ë„ í†µê³¼í•˜ì§€ ëª»í•˜ëŠ” ìƒí™©\
ì–´ë””ê°€ ë¬¸ì  ì§€ ë‹¤ì‹œ í•œë²ˆ ì°¾ì•„ë³´ì !
